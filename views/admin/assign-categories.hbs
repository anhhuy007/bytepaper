{{!-- views/admin/assign-categories.hbs --}}
<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-bold mb-6">Assign Categories</h1>

  {{#each editors}}
  <div class="mb-6 border-b pb-4">
    <h2 class="text-xl font-semibold mb-2">{{this.full_name}} ({{this.username}})</h2>

    <div class="grid grid-cols-2 gap-4">
      <!-- Assigned Categories -->
      <div>
        <label class="block text-lg font-medium mb-2">Assigned Categories</label>
        <ul class="list-disc pl-5">
          {{#if this.assignedCategories.length}} {{#each this.assignedCategories}}
          <li class="flex justify-between items-center">
            {{this.name}}
            <form action="/admin/assign-categories/unassign" method="POST" class="inline">
              <input type="hidden" name="editorId" value="{{../this.id}}" />
              <input type="hidden" name="categoryId" value="{{this.id}}" />
              <button type="submit" class="btn btn-xs btn-error">Unassign</button>
            </form>
          </li>
          {{/each}} {{else}}
          <p class="text-sm text-gray-500">No categories assigned.</p>
          {{/if}}
        </ul>
      </div>

      <!-- Available Categories -->
      <div>
        <label class="block text-lg font-medium mb-2">Available Categories</label>
        <ul class="list-disc pl-5">
          {{#each ../categories}} {{#unless (includes ../this.assignedCategories this.id)}}
          <li class="flex justify-between items-center">
            {{this.name}}
            <form action="/admin/assign-categories/assign" method="POST" class="inline">
              <input type="hidden" name="editorId" value="{{../this.id}}" />
              <input type="hidden" name="categoryId" value="{{this.id}}" />
              <button type="submit" class="btn btn-xs btn-primary">Assign</button>
            </form>
          </li>
          {{/unless}} {{/each}}
        </ul>
      </div>
    </div>
  </div>
  {{/each}}
</div>
